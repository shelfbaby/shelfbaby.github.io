import{r as e,j as r,f as t,Y as n,M as s,F as o}from"./index-ae48b77e.js";import{a0 as l,R as a,L as i,a as d,T as u}from"./app-6c1e0ad4.js";import{t as c}from"./tslib-e9f95dca.js";import{L as f}from"./label-d0c29119.js";import{a as p}from"./modal.constants-197ec555.js";var m,x={},v={};Object.defineProperty(x,"__esModule",{value:!0});var g=e,h=c.__importDefault(function(){if(m)return v;m=1,Object.defineProperty(v,"__esModule",{value:!0});var r=e,t=l,n=t.isBrowser?window:null,s=function(e){return!!e.addEventListener},o=function(e){return!!e.on};return v.default=function(e,l,a,i){void 0===a&&(a=n),r.useEffect((function(){if(l&&a)return s(a)?t.on(a,e,l,i):o(a)&&a.on(e,l,i),function(){s(a)?t.off(a,e,l,i):o(a)&&a.off(e,l,i)}}),[e,l,a,JSON.stringify(i)])},v}()),b=l,j=x.default=function(e,r,t,n){void 0===r&&(r=b.noop),void 0===t&&(t={}),void 0===n&&(n=[e]);var s=t.event,o=void 0===s?"keydown":s,l=t.target,a=t.options,i=g.useMemo((function(){var t,n="function"==typeof(t=e)?t:"string"==typeof t?function(e){return e.key===t}:t?function(){return!0}:function(){return!1};return function(e){if(n(e))return r(e)}}),n);h.default(o,i,l,a)};const w=({selected:e,onSelect:n,onSetSelected:s,children:o})=>r.jsx("li",{className:t("p-2 rounded-lg transition duration-200 hover:bg-grey-600 font-sans text-base text-dark-100 cursor-pointer flex items-center justify-start",{"bg-grey-600":e}),onClick:()=>n(),onMouseEnter:()=>s(),children:o}),y=({options:t,renderItem:n,onSelect:s,disabled:o,className:l})=>{const a=e.useRef(null),[i,d]=e.useState(10),u=e.useRef(!o),[c,f]=e.useState(0);e.useEffect((()=>{u.current=!o;const e=()=>{if(!a.current||!a.current.parentElement)return;const{scrollTop:e,scrollHeight:r,clientHeight:t}=a.current.parentElement;r-t-e<100&&d((e=>e+10))};return a.current?.parentElement?.addEventListener("scroll",e,{passive:!0}),()=>{a.current?.parentElement?.removeEventListener("scroll",e)}}),[o]);const p=e.useCallback((e=>{u.current&&f((r=>{const n=r+e;return n>t.length-1||n<0?0:n}))}),[o]);return j("ArrowUp",(()=>p(-1)),{},[t]),j("ArrowDown",(()=>p(1)),{},[t]),j("Enter",(()=>{u.current&&s(t[c])}),{},[c]),t?r.jsx("ul",{className:`${l||""}`,ref:a,children:t.slice(0,i).map(((e,t)=>r.jsx(w,{selected:c===t,onSelect:()=>s(e),onSetSelected:()=>f(t),children:n(e,t)},t)))}):null},N=({value:l,disabled:c=!1,placeholder:m,label:x=!1,position:v="left",showError:g=!0,error:h=null,className:b="",validate:j,onChange:w,options:N,renderOption:S,search:k,onSearchChange:E,dropdownSuffix:L,isLoading:C,eventLabel:M,footer:_,showArrow:O=!0,required:R=!1})=>{const q=n(),A=e.useRef(null),[D,F]=e.useState(!1),[H,I]=e.useState(null),[P,T]=e.useState("");s(A),a((()=>I(h)),[h]);return r.jsxs("div",{className:`relative ${b}`,children:["left"===v&&x&&"string"==typeof x?r.jsx(f,{required:R,children:r.jsx(o,{id:x})}):null,"left"===v&&x&&"string"!=typeof x?r.jsx(f,{required:R,children:x}):null,r.jsxs("div",{ref:A,onClick:()=>F(!D),className:t("overflow-hidden flex items-center justify-start group bg-dark-900 rounded-lg border border-solid transition-all duration-200 active:ring-opacity-30 active:ring-[4px]",{"bg-opacity-70 cursor-not-allowed pointer-events-none bg-dark border border-dark-900 border-solid":c,"hover:border-red-default border-red-default active:border-red-default ring-red-default":H,"hover:border-blue-default border-dark-900 active:border-blue-default ring-blue-default":!H,"ring-opacity-30 ring-[4px]":D}),children:[r.jsxs("div",{className:t("bg-transparent outline-none border-none py-3 w-full px-4 cursor-pointer flex justify-between items-center text-body text-dark-100",{"!text-dark-500 cursor-not-allowed":c,"!text-dark-400":!c&&!D&&!l&&0!==l}),children:[D&&k?r.jsx("input",{placeholder:q.formatMessage({id:m?.toLocaleString()??"select.channels.placeholder"}),className:"bg-transparent outline-none text-dark-300 w-full",type:"text",ref:e=>e?.focus(),value:P,onChange:e=>{T(e.target.value),E&&E(e.target.value)}}):null!=l&&""!==l?S?S(l,D):l:m,C?r.jsx("div",{className:"ml-auto mr-2",children:r.jsx(i,{size:"small"})}):null,O?r.jsx(d,{className:"transition-all ml-auto "+(D?"rotate-0":"rotate-180")}):null]}),"right"===v&&x&&r.jsx("div",{className:"h-full flex items-center min-h-[48px] whitespace-nowrap pr-4",children:x&&x})]}),g&&H&&r.jsxs("p",{className:"mt-2 flex items-center justify-start text-sm text-red-default font-medium",children:[r.jsx(p,{className:"h-4 w-4 text-danger-default mr-1"}),H]}),r.jsxs(u,{visible:D&&!!N&&N.length>0,onDismiss:e=>{T(""),!A.current?.contains(e.target)&&F(!1)},className:(x?"top-[81px]":"top-[50px]")+" absolute",children:[L&&L,r.jsx(y,{options:N?.filter((e=>!k||k(P,e))),onSelect:e=>{(e=>{if(T(""),j){const r=j(e);if(!0!==r)return void I(r.error);I(null)}w?.(e)})(e),F(!1)},renderItem:e=>r.jsx("div",{className:"w-full",children:S?S(e,D):""+e}),disabled:!D||c}),_&&r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"h-px bg-dark-700 w-full my-2"}),_]})]})]})};export{y as O,N as S};
